var q = require('q');

module.exports = function promise() {
  var deferred = q.defer(),
      args, callback, fn;

  fn = arguments[0];

  callback = function(err, res) {
    if (err) return deferred.reject(err);
    return deferred.resolve(res);
  };

  args = arguments.length >= 2 ? [].slice.call(arguments, 1) : [];
  args.push(callback);

  fn.apply(null, args);

  return deferred.promise;
};
